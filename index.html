<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>G√©n√©rateur de signature Humanea</title>
<style>
  body { 
    font-family: 'Poppins', Arial, sans-serif; 
    background: #fafafa; 
    margin: 0; 
    padding: 30px; 
    display: flex; 
    justify-content: center; 
  }
  .card {
    background: #fff; 
    padding: 25px; 
    border-radius: 10px; 
    box-shadow: 0 4px 12px rgba(0,0,0,0.1); 
    max-width: 700px; 
    width: 100%;
  }
  h2 { margin-top: 0; color: #7C1653; }
  label { display: block; margin-top: 10px; font-weight: 500; }
  input, select { width: 100%; padding: 8px; margin-top: 4px; border: 1px solid #ccc; border-radius: 6px; }
  button { padding: 8px 15px; border: none; border-radius: 6px; cursor: pointer; margin-top: 15px; font-weight: bold; }
  #generateBtn { background-color: #7C1653; color: white; }
  #copyBtn { background-color: #3B2257; color: white; margin-left: 10px; }
  #resetBtn { background-color: #ccc; color: black; margin-left: 10px; }
  #preview { margin-top: 20px; border: 1px solid #ddd; background: #fff; padding: 15px; border-radius: 8px; }
  #result { display: none; }
  .hidden { display: none; }
  .confirmation { color: green; margin-top: 10px; font-weight: bold; }
</style>
</head>
<body>
<div class="card">
<h2>üñãÔ∏è G√©n√©rateur de signature Humanea</h2>
<p>Renseignez vos informations :</p>

<label>Pr√©nom :</label>
<input id="prenom" placeholder="Jean">

<label>Nom :</label>
<input id="nom" placeholder="Dupont">

<label>Poste :</label>
<select id="fonctionSelect" onchange="updateFonction()">
  <option value="">-- S√©lectionnez --</option>
  <option value="veterinaire">Docteur v√©t√©rinaire</option>
  <option value="asv">Auxiliaire sp√©cialis√© v√©t√©rinaire</option>
  <option value="autre">Autre</option>
</select>

<div id="genreASVDiv" class="hidden">
  <label>Genre :</label>
  <select id="genreASV">
    <option value="femme">Femme</option>
    <option value="homme">Homme</option>
  </select>
</div>

<div id="titreDiv" class="hidden">
    <label>Titre(s) :</label>
    <input id="titres" placeholder="DMV, MSc, Dipl. ECVD">
</div>

<div id="ligneLibreDiv" class="hidden">
    <label>Ligne libre 1 :</label>
    <input id="ligneLibre" placeholder="Assistant en chirurgie">
    <label>Ligne libre 2 (optionnel) :</label>
    <input id="ligneLibre2" placeholder="Ancien interne de l'ENVT">
</div>

<div id="ligneLibreASVDiv" class="hidden">
    <label>Ligne libre :</label>
    <input id="ligneLibreASV" placeholder="Service d'imagerie m√©dicale">
</div>

<div id="autreRoleDiv" class="hidden">
  <label>Pr√©cisez votre r√¥le :</label>
  <input id="autreRole" placeholder="Responsable administratif, stagiaire, etc.">
  <label>Ligne libre (optionnelle) :</label>
  <input id="ligneLibreAutre">
</div>

<div id="veterinaireDetails" class="hidden">
  <label>Statut v√©t√©rinaire :</label>
  <select id="statutSpecialisation" onchange="updateSpecialisation()">
    <option value="">V√©t√©rinaire g√©n√©raliste</option>
    <option value="spec-fr">Sp√©cialiste fran√ßais</option>
    <option value="spec-eur">Sp√©cialiste europ√©en (EBVS)</option>
  </select>

  <div id="specialiteDiv" class="hidden">
    <label>Sp√©cialit√© :</label>
    <input id="specialite" placeholder="Dermatologie, chirurgie, m√©decine interne...">
  </div>
</div>

<div style="margin-top:15px;">
  <button id="generateBtn" onclick="generer()">G√©n√©rer ma signature üôÇ</button>
  <button id="copyBtn" onclick="copierHTML()">Copier la signature (HTML)</button>
  <button id="resetBtn" onclick="resetForm()">R√©initialiser le formulaire</button>
</div>

<div class="confirmation hidden" id="confirmationMessage">Votre signature a bien √©t√© g√©n√©r√©e ci-dessous ‚úÖ</div>
<div id="preview"></div>
<div id="result"></div>
</div>

<script>
function updateFonction() {
  const fSelect = document.getElementById('fonctionSelect').value;
  ['veterinaireDetails','autreRoleDiv','titreDiv','ligneLibreDiv','ligneLibreASVDiv','genreASVDiv']
    .forEach(id => document.getElementById(id).classList.add('hidden'));
  ['titres','ligneLibre','ligneLibre2','autreRole','specialite','statutSpecialisation','ligneLibreASV','ligneLibreAutre']
    .forEach(id => { if (document.getElementById(id)) document.getElementById(id).value = ""; });
  
  if (fSelect === 'veterinaire') {
    document.getElementById('veterinaireDetails').classList.remove('hidden');
    document.getElementById('titreDiv').classList.remove('hidden');
    document.getElementById('ligneLibreDiv').classList.remove('hidden');
  } else if (fSelect === 'autre') {
    document.getElementById('autreRoleDiv').classList.remove('hidden');
  } else if (fSelect === 'asv') {
    document.getElementById('genreASVDiv').classList.remove('hidden');
    document.getElementById('ligneLibreASVDiv').classList.remove('hidden');
  }
}

function updateSpecialisation() {
  const statut = document.getElementById('statutSpecialisation').value;
  const specialiteDiv = document.getElementById('specialiteDiv');
  if (statut === 'spec-fr' || statut === 'spec-eur') {
    specialiteDiv.classList.remove('hidden');
  } else {
    specialiteDiv.classList.add('hidden');
  }
}

function formatNom(nom) { return nom.toUpperCase(); }
function formatPrenom(prenom) { return prenom ? prenom.charAt(0).toUpperCase() + prenom.slice(1).toLowerCase() : ""; }
function cleanEmail(str) { return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/\s+/g,'').toLowerCase(); }

function generer() {
  const prenom = formatPrenom(document.getElementById('prenom').value || "Jean");
  const nom = formatNom(document.getElementById('nom').value || "DUPONT");
  const titres = document.getElementById('titres').value || "";
  const ligneLibre1 = document.getElementById('ligneLibre').value || "";
  const ligneLibre2 = document.getElementById('ligneLibre2').value || "";
  const ligneLibreASV = document.getElementById('ligneLibreASV').value || "";
  const ligneLibreAutre = document.getElementById('ligneLibreAutre').value || "";

  let fonction1 = "";
  let fonction2 = "";
  let ebvs = "";
  let extraPadding = "15px";

  const choix = document.getElementById('fonctionSelect').value;
  if (choix === "veterinaire") {
    fonction1 = "Docteur v√©t√©rinaire";
    const statut = document.getElementById('statutSpecialisation').value;
    const specialiteInput = document.getElementById('specialite').value.trim();
    const specialite = specialiteInput ? specialiteInput.toLowerCase() : "";

    if (statut === "spec-fr" && specialite) {
      fonction2 = `Sp√©cialiste en ${specialite}`;
    } else if (statut === "spec-fr") {
      fonction2 = "Sp√©cialiste";
    } else if (statut === "spec-eur" && specialite) {
      fonction2 = `Sp√©cialiste europ√©en en ${specialite}`;
      ebvs = `<p style="font-size:11px;margin:0 0 2px 0;line-height:1;">EBVS<sup>¬Æ</sup> European Board of Veterinary Specialisation</p>`;
    } else if (statut === "spec-eur") {
      fonction2 = "Sp√©cialiste europ√©en";
      ebvs = `<p style="font-size:11px;margin:0 0 2px 0;line-height:1;">EBVS<sup>¬Æ</sup> European Board of Veterinary Specialisation</p>`;
    }
  } else if (choix === "asv") {
    const genre = document.getElementById('genreASV').value;
    extraPadding = "25px";
    fonction1 = `<p style="color:#7C1653;font-weight:bold;margin:0 0 4px 0;line-height:1;font-size:14px;">Auxiliaire ${genre === "femme" ? "sp√©cialis√©e" : "sp√©cialis√©"} v√©t√©rinaire</p>`;
  } else if (choix === "autre") {
    const autreRole = document.getElementById('autreRole').value || "Membre de l'√©quipe Humanea";
    fonction1 = `<p style="color:#7C1653;font-weight:bold;margin:0 0 4px 0;line-height:1;font-size:14px;">${autreRole}</p>`;
  }

  const email = `${cleanEmail(prenom.charAt(0))}.${cleanEmail(nom)}@humanea-veterinaire.fr`;

  let ligneFonctionHTML = "";
  if (titres) ligneFonctionHTML += `<p style="color:#7C1653;font-weight:bold;margin:0 0 8px 0;line-height:1;">${titres}</p>`;
  
  if (choix === "veterinaire") {
    ligneFonctionHTML += `<p style="font-size:11px;margin:0 0 2px 0;line-height:1;">Docteur v√©t√©rinaire</p>`;
    if (fonction2) ligneFonctionHTML += `<p style="font-size:11px;margin:0 0 2px 0;line-height:1;">${fonction2}</p>`;
    if (ebvs) ligneFonctionHTML += ebvs;
    if (ligneLibre1) ligneFonctionHTML += `<p style="font-size:11px;margin:0 0 2px 0;line-height:1;">${ligneLibre1}</p>`;
    if (ligneLibre2) ligneFonctionHTML += `<p style="font-size:11px;margin:0 0 2px 0;line-height:1;">${ligneLibre2}</p>`;
  } 
  else if (choix === "asv") {
    ligneFonctionHTML += fonction1;
    if (ligneLibreASV) ligneFonctionHTML += `<p style="font-size:11px;margin:0;margin-top:2px;line-height:1;">${ligneLibreASV}</p>`;
  } 
  else if (choix === "autre") {
    ligneFonctionHTML += fonction1;
    if (ligneLibreAutre) ligneFonctionHTML += `<p style="font-size:11px;margin:0;margin-top:2px;line-height:1;">${ligneLibreAutre}</p>`;
  }

  const html = `<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<style>body,table{font-family:'Poppins',Arial,sans-serif;}</style>
</head>
<body>
<table width="600" cellspacing="0" cellpadding="0" border="0" style="border-collapse:collapse;">
<tr>
<td width="50%" valign="middle" style="padding-right:10px;">
<p style="font-size:18px;font-weight:bold;margin:0 0 2px 0;line-height:1;">${prenom} ${nom}</p>
${ligneFonctionHTML}
<div style="text-align:center; padding-top:10px; padding-bottom:${extraPadding};">
<img src="https://www.locomotiv.com/wp-content/uploads/2025/02/humanea-logo-horizontal.png" width="200" alt="Humanea">
</div>
</td>
<td width="50%" valign="top" style="border-left:2px solid #7C1653;padding-left:15px;padding-top:10px;">
<table cellspacing="0" cellpadding="0" border="0">
<tr>
<td><img src="https://www.locomotiv.com/wp-content/uploads/2025/02/4-1.png" width="15" style="vertical-align:middle;"></td>
<td style="padding-left:5px;"><a href="https://www.humanea-veterinaire.fr" style="color:black;text-decoration:none;font-size:11px;">www.humanea-veterinaire.fr</a></td>
</tr>
<tr>
<td><img src="https://www.locomotiv.com/wp-content/uploads/2025/02/6-1.png" width="15" style="vertical-align:middle;"></td>
<td style="padding-left:5px;"><a href="mailto:${email}" style="color:black;text-decoration:none;font-size:11px;">${email}</a></td>
</tr>
<tr>
<td><img src="https://www.locomotiv.com/wp-content/uploads/2025/02/8.png" width="15" style="vertical-align:middle;"></td>
<td style="padding-left:5px;"><a href="tel:0535542594" style="color:black;text-decoration:none;font-size:11px;">05 35 54 25 94</a></td>
</tr>
<tr>
<td><img src="https://www.locomotiv.com/wp-content/uploads/2025/02/2-1.png" width="15" style="vertical-align:middle;"></td>
<td style="padding-left:5px;"><a href="https://maps.app.goo.gl/rEfsbyXU7ka9QKxG9" style="color:black;text-decoration:none;font-size:11px;">4, rue Georges-J√©r√¥me Duret, 33310 Lormont</a></td>
</tr>
</table>
<p style="margin:15px 0 0 0;text-align:left;">
<a href="https://www.facebook.com/people/Humanea-V%C3%A9t%C3%A9rinaire/61572819887899/"><img src="https://www.locomotiv.com/wp-content/uploads/2025/02/10.png" width="20"></a>
<a href="https://www.linkedin.com/company/humanea-veterinaire/"><img src="https://www.locomotiv.com/wp-content/uploads/2025/02/12.png" width="20"></a>
<a href="https://www.instagram.com/humanea_veterinaire/"><img src="https://www.locomotiv.com/wp-content/uploads/2025/02/14.png" width="20"></a>
</p>
</td>
</tr>
</table>
</body>
</html>`;

  document.getElementById('result').innerText = html;
  document.getElementById('preview').innerHTML = html;
  document.getElementById('confirmationMessage').classList.remove('hidden');
}

function copierHTML() {
  const result = document.getElementById('result').innerText;
  navigator.clipboard.writeText(result).then(() => {
    const btn = document.getElementById('copyBtn');
    btn.textContent = "Copi√© ‚úÖ";
    setTimeout(() => btn.textContent = "Copier la signature (HTML)", 2000);
  });
}

function resetForm() {
  document.querySelectorAll('input').forEach(input => input.value = "");
  document.querySelectorAll('select').forEach(select => select.value = "");
  ['veterinaireDetails','autreRoleDiv','titreDiv','ligneLibreDiv','ligneLibreASVDiv','genreASVDiv']
    .forEach(id => document.getElementById(id).classList.add('hidden'));
  document.getElementById('preview').innerHTML = "";
  document.getElementById('result').innerText = "";
  document.getElementById('confirmationMessage').classList.add('hidden');
}
</script>
</body>
</html>
